<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>–ó–æ–º–±–∏–ì–ª–æ–±–∞–ª ‚Äî Outbreak Game</title>
  <meta name="description" content="Virtual outbreak meme-game. Get your infection number. Infect friends. Climb the leaderboard."/>
  <style>
    :root{
      --bg:#050607;
      --bg2:#07090b;
      --panel:rgba(10,14,16,.72);
      --panel2:rgba(7,9,11,.62);
      --line:rgba(124,255,76,.18);
      --line2:rgba(0,255,213,.16);
      --text:#d9ffe8;
      --muted:#8aa79a;
      --toxic:#7CFF4C;
      --cyan:#00ffd5;
      --warn:#ff3b3b;
      --gold:#ffd166;
      --radius:18px;
      --shadow: 0 18px 70px rgba(0,0,0,.62);
      --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--text);
      font-family:var(--sans);
      background:
        radial-gradient(1200px 900px at 18% 8%, rgba(124,255,76,.10), transparent 58%),
        radial-gradient(900px 720px at 82% 22%, rgba(0,255,213,.07), transparent 60%),
        radial-gradient(900px 720px at 55% 85%, rgba(255,59,59,.05), transparent 62%),
        linear-gradient(180deg, var(--bg), var(--bg2) 40%, var(--bg));
      overflow-x:hidden;
    }

    /* Scanlines + grain */
    body::before{
      content:"";
      position:fixed; inset:0;
      background:
        repeating-linear-gradient(0deg,
          rgba(255,255,255,.035) 0px,
          rgba(255,255,255,.035) 1px,
          transparent 2px,
          transparent 4px);
      opacity:.12;
      pointer-events:none;
      z-index:1;
      mix-blend-mode:overlay;
    }
    body::after{
      content:"";
      position:fixed; inset:-60px;
      background:
        radial-gradient(circle at 20% 10%, rgba(255,255,255,.07), transparent 38%),
        radial-gradient(circle at 70% 20%, rgba(255,255,255,.05), transparent 42%),
        radial-gradient(circle at 42% 75%, rgba(255,255,255,.06), transparent 46%);
      filter: blur(2px);
      opacity:.10;
      pointer-events:none;
      z-index:1;
      animation: drift 16s linear infinite;
    }
    @keyframes drift{
      0%{transform:translate3d(0,0,0)}
      50%{transform:translate3d(18px,-10px,0)}
      100%{transform:translate3d(0,0,0)}
    }

    .wrap{position:relative; z-index:2; max-width:1100px; margin:0 auto; padding:22px 14px 70px}
    .top{
      display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
      margin-bottom:14px;
    }
    .brand{display:flex; gap:12px; align-items:center}
    .logo{
      width:44px;height:44px;border-radius:14px;
      border:1px solid rgba(124,255,76,.25);
      background:
        radial-gradient(circle at 30% 30%, rgba(124,255,76,.90), rgba(124,255,76,.15) 45%, transparent 56%),
        radial-gradient(circle at 75% 70%, rgba(0,255,213,.30), transparent 55%),
        linear-gradient(180deg, #0a1411, #050607);
      box-shadow: 0 0 0 1px rgba(0,255,213,.08) inset, 0 18px 50px rgba(0,0,0,.55);
      position:relative; overflow:hidden;
    }
    .logo::after{
      content:"";
      position:absolute; inset:-30%;
      background: conic-gradient(from 180deg, transparent, rgba(124,255,76,.20), transparent, rgba(0,255,213,.13), transparent);
      animation: spin 6.8s linear infinite;
      opacity:.9;
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    .brandTitle{
      font-family:var(--mono);
      font-weight:900;
      letter-spacing:.06em;
      text-transform:uppercase;
      margin:0;
      font-size:16px;
      line-height:1.1;
    }
    .brandSub{
      margin-top:2px;
      font-family:var(--mono);
      font-size:12px;
      color:var(--muted);
      letter-spacing:.04em;
    }

    .chips{display:flex; gap:10px; flex-wrap:wrap}
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding:9px 12px;
      border-radius:999px;
      border:1px solid rgba(124,255,76,.18);
      background: rgba(10,14,16,.62);
      backdrop-filter: blur(8px);
      font-family:var(--mono);
      font-size:12px;
      color:rgba(217,255,232,.92);
      box-shadow: 0 12px 30px rgba(0,0,0,.32);
    }
    .dot{width:8px;height:8px;border-radius:50%}
    .dot.toxic{background:var(--toxic); box-shadow:0 0 16px rgba(124,255,76,.55)}
    .dot.cyan{background:var(--cyan); box-shadow:0 0 16px rgba(0,255,213,.45)}
    .dot.warn{background:var(--warn); box-shadow:0 0 16px rgba(255,59,59,.35)}
    .dot.gold{background:var(--gold); box-shadow:0 0 16px rgba(255,209,102,.30)}

    .shell{
      border-radius:var(--radius);
      border:1px solid rgba(124,255,76,.16);
      background:
        linear-gradient(180deg, rgba(10,14,16,.78), rgba(5,6,7,.62)),
        radial-gradient(900px 340px at 28% -10%, rgba(124,255,76,.14), transparent 56%),
        radial-gradient(700px 280px at 80% 8%, rgba(0,255,213,.10), transparent 56%);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .shell::before{
      content:"";
      position:absolute; inset:0;
      background:
        repeating-linear-gradient(90deg, rgba(255,255,255,.02) 0px, rgba(255,255,255,.02) 1px, transparent 2px, transparent 16px),
        linear-gradient(90deg, transparent, rgba(124,255,76,.05), transparent);
      opacity:.55;
      pointer-events:none;
      transform:skewY(-2deg);
    }

    .grid{
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:14px;
      padding:14px;
      position:relative;
    }
    @media (max-width: 920px){
      .grid{grid-template-columns:1fr}
    }

    .panel{
      border-radius:var(--radius);
      border:1px solid rgba(124,255,76,.14);
      background: var(--panel);
      padding:14px;
      backdrop-filter: blur(8px);
      box-shadow: 0 16px 40px rgba(0,0,0,.35);
    }
    .panelTitle{
      margin:0 0 10px;
      font-family:var(--mono);
      text-transform:uppercase;
      letter-spacing:.08em;
      font-size:12px;
      color:rgba(217,255,232,.92);
      display:flex; align-items:center; justify-content:space-between; gap:8px;
    }
    .small{font-family:var(--mono); font-size:11px; color:var(--muted); letter-spacing:.04em}
    .hr{height:1px;background:rgba(22,32,38,.92); margin:12px 0}

    .nav{
      display:grid; gap:10px;
    }
    .navBtn{
      width:100%;
      display:flex; align-items:center; gap:10px;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(0,255,213,.14);
      background: rgba(7,9,11,.52);
      cursor:pointer;
      color:rgba(217,255,232,.92);
      font-family:var(--mono);
      letter-spacing:.05em;
      text-transform:uppercase;
      font-weight:900;
      box-shadow: 0 12px 30px rgba(0,0,0,.28);
      transition: transform .08s ease, filter .12s ease, border-color .12s ease;
    }
    .navBtn:hover{filter:brightness(1.08); border-color: rgba(124,255,76,.22)}
    .navBtn:active{transform:translateY(1px)}
    .navBtn.active{
      border-color: rgba(124,255,76,.28);
      box-shadow: 0 16px 36px rgba(0,0,0,.38), 0 0 0 1px rgba(124,255,76,.08) inset;
      background: linear-gradient(180deg, rgba(124,255,76,.12), rgba(7,9,11,.52));
    }

    .icon{
      width:22px;height:22px; display:inline-flex; align-items:center; justify-content:center;
      color:var(--toxic);
      filter: drop-shadow(0 0 10px rgba(124,255,76,.18));
    }
    .icon.cyan{color:var(--cyan); filter: drop-shadow(0 0 10px rgba(0,255,213,.16))}
    .icon.warn{color:var(--warn); filter: drop-shadow(0 0 10px rgba(255,59,59,.14))}
    .icon.gold{color:var(--gold); filter: drop-shadow(0 0 10px rgba(255,209,102,.12))}

    .screen{
      display:none;
      animation: in .14s ease;
    }
    .screen.show{display:block}
    @keyframes in{from{opacity:.75; transform:translateY(3px)} to{opacity:1; transform:translateY(0)}}

    .heroTitle{
      margin:0;
      font-family:var(--mono);
      font-size:30px;
      line-height:1.05;
      letter-spacing:.03em;
      text-transform:uppercase;
      position:relative;
    }
    .glitch{
      position:relative;
      display:inline-block;
    }
    .glitch::before, .glitch::after{
      content:attr(data-text);
      position:absolute; left:0; top:0;
      width:100%;
      opacity:.52;
      pointer-events:none;
    }
    .glitch::before{
      transform:translate(1px,-1px);
      color:rgba(0,255,213,.75);
      clip-path: inset(0 0 70% 0);
      animation: glitch 2.4s infinite linear alternate-reverse;
    }
    .glitch::after{
      transform:translate(-2px,1px);
      color:rgba(255,59,59,.55);
      clip-path: inset(20% 0 0 0);
      animation: glitch 3.1s infinite linear alternate-reverse;
    }
    @keyframes glitch{
      0%{clip-path: inset(0 0 92% 0)}
      15%{clip-path: inset(12% 0 56% 0)}
      30%{clip-path: inset(62% 0 18% 0)}
      45%{clip-path: inset(28% 0 48% 0)}
      60%{clip-path: inset(80% 0 6% 0)}
      75%{clip-path: inset(10% 0 72% 0)}
      100%{clip-path: inset(58% 0 22% 0)}
    }

    .lead{
      margin:10px 0 0;
      color:rgba(217,255,232,.86);
      font-size:14px;
      line-height:1.55;
      max-width:70ch;
    }

    .btnRow{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
    .btn{
      border:1px solid rgba(124,255,76,.22);
      background: linear-gradient(180deg, rgba(124,255,76,.18), rgba(124,255,76,.05));
      color:var(--text);
      border-radius:14px;
      padding:12px 14px;
      font-family:var(--mono);
      font-weight:900;
      letter-spacing:.05em;
      text-transform:uppercase;
      cursor:pointer;
      box-shadow: 0 14px 36px rgba(0,0,0,.35), 0 0 0 1px rgba(0,255,213,.08) inset;
      transition: transform .08s ease, filter .15s ease;
    }
    .btn:hover{filter:brightness(1.1)}
    .btn:active{transform:translateY(1px)}
    .btn.secondary{
      border-color: rgba(0,255,213,.18);
      background: linear-gradient(180deg, rgba(0,255,213,.14), rgba(0,255,213,.04));
    }
    .btn.danger{
      border-color: rgba(255,59,59,.22);
      background: linear-gradient(180deg, rgba(255,59,59,.14), rgba(255,59,59,.05));
    }
    .btn:disabled{
      opacity:.45;
      cursor:not-allowed;
      filter:saturate(.7);
    }

    .kv{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin-top:14px;
    }
    @media (max-width: 560px){ .kv{grid-template-columns:1fr} }
    .box{
      border-radius:14px;
      border:1px solid rgba(22,32,38,.92);
      background: rgba(7,9,11,.55);
      padding:12px 12px;
    }
    .k{font-family:var(--mono); font-size:11px; color:var(--muted); text-transform:uppercase; letter-spacing:.08em}
    .v{margin-top:6px; font-family:var(--mono); font-size:18px; font-weight:900}
    .v.toxic{color:var(--toxic); text-shadow:0 0 18px rgba(124,255,76,.18)}
    .v.cyan{color:var(--cyan); text-shadow:0 0 18px rgba(0,255,213,.15)}
    .v.warn{color:rgba(255,59,59,.95); text-shadow:0 0 16px rgba(255,59,59,.12)}

    .table{
      width:100%;
      border-collapse:collapse;
      font-family:var(--mono);
      font-size:12px;
      overflow:hidden;
      border-radius:14px;
      margin-top:10px;
    }
    .table thead th{
      text-align:left;
      padding:10px 10px;
      background: rgba(7,9,11,.55);
      border-bottom:1px solid rgba(22,32,38,.92);
      color:rgba(217,255,232,.84);
      text-transform:uppercase;
      letter-spacing:.08em;
      font-size:11px;
    }
    .table tbody td{
      padding:10px 10px;
      border-bottom:1px solid rgba(22,32,38,.72);
      color:rgba(217,255,232,.92);
    }
    .table tbody tr:hover td{background: rgba(124,255,76,.06)}
    .rank{color:var(--muted)}
    .num{color:var(--toxic); font-weight:900}

    .toast{
      position:fixed;
      left:50%; bottom:16px;
      transform:translateX(-50%);
      background: rgba(10,14,16,.92);
      border:1px solid rgba(124,255,76,.22);
      border-radius:14px;
      padding:12px 14px;
      font-family:var(--mono);
      font-size:12px;
      color:rgba(217,255,232,.95);
      z-index:99;
      box-shadow: 0 14px 40px rgba(0,0,0,.55);
      display:none;
      max-width:min(680px, calc(100vw - 24px));
    }
    .toast.show{display:block}

    .footer{
      margin-top:16px;
      padding-top:14px;
      border-top:1px solid rgba(22,32,38,.92);
      font-family:var(--mono);
      font-size:11px;
      color:var(--muted);
      display:flex; gap:12px; flex-wrap:wrap; justify-content:space-between; align-items:center;
    }
    a.link{color:rgba(0,255,213,.9); text-decoration:none}
    a.link:hover{text-decoration:underline}

    .badgeRow{display:flex; gap:8px; flex-wrap:wrap; margin-top:12px}
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(22,32,38,.92);
      background: rgba(7,9,11,.55);
      font-family:var(--mono);
      font-size:11px;
      color:rgba(217,255,232,.9);
    }

    .mono{font-family:var(--mono)}
    .dangerText{color:rgba(255,59,59,.92)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div class="brand">
        <div class="logo"></div>
        <div>
          <div class="brandTitle">–ó–æ–º–±–∏–ì–ª–æ–±–∞–ª</div>
          <div class="brandSub">OUTBREAK GAME // MEME EXPERIMENT</div>
        </div>
      </div>
      <div class="chips">
        <div class="chip"><span class="dot warn"></span><span class="mono">DEMO MODE</span></div>
        <div class="chip"><span class="dot toxic"></span><span class="mono">YOUR LINK: ?ref=######</span></div>
        <div class="chip"><span class="dot cyan"></span><span class="mono">MOBILE READY</span></div>
      </div>
    </div>

    <section class="shell">
      <div class="grid">

        <!-- LEFT NAV -->
        <aside class="panel">
          <div class="panelTitle">
            <span>CONTROL PANEL</span>
            <span class="small">v0</span>
          </div>

          <div class="nav">
            <button class="navBtn active" data-screen="home">
              <span class="icon cyan" aria-hidden="true">${icon("bio")}</span>
              <span>Home</span>
            </button>
            <button class="navBtn" data-screen="status">
              <span class="icon" aria-hidden="true">${icon("id")}</span>
              <span>My Infection</span>
            </button>
            <button class="navBtn" data-screen="leaderboard">
              <span class="icon gold" aria-hidden="true">${icon("crown")}</span>
              <span>Leaderboard</span>
            </button>
            <button class="navBtn" data-screen="lineage">
              <span class="icon warn" aria-hidden="true">${icon("chain")}</span>
              <span>Lineage</span>
            </button>
          </div>

          <div class="hr"></div>
          <div class="small">
            –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å –∫–∞–∫ <b>–∏–≥—Ä–∞</b>, –∞ –Ω–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è.
            –°–µ–π—á–∞—Å –º—ã —Å—Ç—Ä–æ–∏–º UI + –æ—â—É—â–µ–Ω–∏–µ ‚Äú—è –≤ —Ä–µ–µ—Å—Ç—Ä–µ –∑–∞—Ä–∞–∂–µ–Ω–∏—è‚Äù.
            <span class="dangerText">–ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥</span> –ø–æ–¥–∫–ª—é—á–∏–º –ø–æ–∑–∂–µ (—á–µ—Ä–µ–∑ –±–æ—Ç–∞/—Å–µ—Ä–≤–µ—Ä), –∫–æ–≥–¥–∞ –≤–∏–∑—É–∞–ª –±—É–¥–µ—Ç –∏–¥–µ–∞–ª—å–Ω—ã–π.
          </div>

          <div class="hr"></div>
          <div class="badgeRow">
            <span class="badge"><span class="dot toxic"></span>Wave-0</span>
            <span class="badge"><span class="dot cyan"></span>Scanner</span>
            <span class="badge"><span class="dot warn"></span>Quarantine</span>
          </div>
        </aside>

        <!-- RIGHT CONTENT -->
        <main class="panel">

          <!-- HOME -->
          <section class="screen show" id="screen-home">
            <h1 class="heroTitle">
              <span class="glitch" data-text="OUTBREAK REGISTRY">OUTBREAK REGISTRY</span>
            </h1>
            <p class="lead">
              –≠—Ç–æ <b>–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –≤–∏—Ä—É—Å</b>. –ó–¥–µ—Å—å –≤–∞–∂–µ–Ω –Ω–µ ‚Äú—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª‚Äù, –∞ <b>—Å–ª–µ–¥</b>:
              —Ç—ã –ø–æ–ª—É—á–∞–µ—à—å –Ω–æ–º–µ—Ä, –∑–∞—Ä–∞–∂–∞–µ—à—å –¥—Ä—É–≥–∏—Ö, –ª–µ–∑–µ—à—å –≤ —Ç–æ–ø –∏ –æ—Å—Ç–∞–≤–ª—è–µ—à—å —Ü–µ–ø–æ—á–∫—É –Ω–∞–≤—Å–µ–≥–¥–∞.
            </p>

            <div class="btnRow">
              <button class="btn" id="btnClaim">${icon("syringe")} GET INFECTION NUMBER</button>
              <button class="btn secondary" id="btnInfect" disabled>${icon("send")} INFECT FRIEND</button>
              <button class="btn danger" id="btnReset">${icon("skull")} RESET (DEMO)</button>
            </div>

            <div class="kv">
              <div class="box">
                <div class="k">Your Infection Number</div>
                <div class="v toxic" id="meNum">‚Äî</div>
              </div>
              <div class="box">
                <div class="k">Infected By</div>
                <div class="v cyan" id="meBy">‚Äî</div>
              </div>
              <div class="box">
                <div class="k">Your Infections</div>
                <div class="v toxic" id="meCount">‚Äî</div>
              </div>
              <div class="box">
                <div class="k">Your Share Link</div>
                <div class="v" id="meLink" style="font-size:12px; color:rgba(217,255,232,.9); word-break:break-all">‚Äî</div>
              </div>
            </div>

            <div class="hr"></div>
            <div class="small">
              <b>–ú–µ–º-—Ü–∏–∫–ª—ã:</b> –Ω–æ–º–µ—Ä ‚Üí —Å—Å—ã–ª–∫–∞ ‚Üí –¥—Ä—É–≥ ‚Üí ‚Äúinfected by‚Äù ‚Üí —Ç–æ–ø ‚Üí –∫–∞—Ä—Ç–æ—á–∫–∞/—Å–∫—Ä–∏–Ω—à–æ—Ç ‚Üí —Å–Ω–æ–≤–∞.
              –ù–∞ V1 –¥–æ–±–∞–≤–∏–º <b>share-card PNG</b> –∏ <b>—Ä–µ–∞–ª—å–Ω—ã–π –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ª–∏–¥–µ—Ä–±–æ—Ä–¥</b>.
            </div>
          </section>

          <!-- STATUS -->
          <section class="screen" id="screen-status">
            <div class="panelTitle">
              <span>MY INFECTION</span>
              <span class="small" id="statusHint">‚Äî</span>
            </div>
            <p class="lead">
              –≠—Ç–æ —Ç–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å –∑–∞—Ä–∞–∂–µ–Ω–∏—è. –í –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ —É —Ç–µ–±—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
              –ù–æ UI —É–∂–µ –∫–∞–∫ –≤ –∏–≥—Ä–µ ‚Äî —ç—Ç–æ —Ç–æ, —á—Ç–æ –±—É–¥—É—Ç ‚Äú–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –º–∏—Ä—É‚Äù.
            </p>
            <div class="kv">
              <div class="box">
                <div class="k">Infection ID</div>
                <div class="v toxic" id="sNum">‚Äî</div>
              </div>
              <div class="box">
                <div class="k">Origin</div>
                <div class="v cyan" id="sBy">‚Äî</div>
              </div>
            </div>

            <div class="btnRow">
              <button class="btn secondary" id="btnCopy" disabled>${icon("copy")} COPY LINK</button>
              <button class="btn secondary" id="btnFakeRank">${icon("crown")} SHOW DEMO RANK</button>
            </div>
            <div class="hr"></div>
            <div class="small" id="rankText">–†–∞–Ω–≥ –ø–æ—è–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞—Ä–∞–∂–µ–Ω–∏—è.</div>
          </section>

          <!-- LEADERBOARD -->
          <section class="screen" id="screen-leaderboard">
            <div class="panelTitle">
              <span>LEADERBOARD</span>
              <span class="small">LOCAL (DEMO)</span>
            </div>
            <p class="lead">
              –°–µ–π—á–∞—Å —ç—Ç–æ –ª–æ–∫–∞–ª—å–Ω—ã–π –ª–∏–¥–µ—Ä–±–æ—Ä–¥ (–¥–µ–º–æ). –ù–æ —Ç–∞–±–ª–∏—Ü–∞ –∏ —Å—Ç–∏–ª—å ‚Äî —É–∂–µ –≥–æ—Ç–æ–≤—ã–π ‚Äú—Å–µ—Ä–¥–µ—á–Ω–∏–∫‚Äù.
              –í V2 –ø–æ–¥–∫–ª—é—á–∏–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
            </p>

            <table class="table">
              <thead>
                <tr><th>#</th><th>Infection</th><th>Infections</th><th>By</th></tr>
              </thead>
              <tbody id="lbBody">
                <tr><td class="rank">‚Äî</td><td class="num">‚Äî</td><td class="rank">‚Äî</td><td class="rank">‚Äî</td></tr>
              </tbody>
            </table>

            <div class="hr"></div>
            <div class="small">
              –í –±—É–¥—É—â–µ–º –∑–¥–µ—Å—å –±—É–¥–µ—Ç: <b>Top spreaders</b>, <b>First infected</b>, <b>City waves</b>, —Å–µ–∑–æ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã.
            </div>
          </section>

          <!-- LINEAGE -->
          <section class="screen" id="screen-lineage">
            <div class="panelTitle">
              <span>LINEAGE VIEWER</span>
              <span class="small">DEMO</span>
            </div>
            <p class="lead">
              ‚Äú–ö—Ç–æ –∫–æ–≥–æ –∑–∞—Ä–∞–∑–∏–ª‚Äù ‚Äî —ç—Ç–æ —Å–≤—è—Ç–æ–µ. –í –¥–µ–º–æ –ø–æ–∫–∞–∂–µ–º –ø—Ä–æ—Å—Ç—É—é —Ü–µ–ø–æ—á–∫—É.
              –í –≥–ª–æ–±–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ —ç—Ç–æ —Å—Ç–∞–Ω–µ—Ç ‚Äú—Ä–æ–¥–æ—Å–ª–æ–≤–Ω–æ–π‚Äù –∑–∞—Ä–∞–∂–µ–Ω–∏—è.
            </p>

            <div class="box">
              <div class="k">Chain</div>
              <div class="v" id="chainText" style="font-size:14px;color:rgba(217,255,232,.9)">‚Äî</div>
            </div>

            <div class="btnRow">
              <button class="btn secondary" id="btnBuildChain">${icon("chain")} BUILD CHAIN</button>
            </div>

            <div class="hr"></div>
            <div class="small">
              –í V1 —Å–¥–µ–ª–∞–µ–º –∫—Ä–∞—Å–∏–≤—ã–π ‚Äú–ª–∏–Ω–µ–π–Ω—ã–π –≥—Ä–∞—Ñ‚Äù (–∫–∞–∫ –∫–∞—Ä—Ç–∞ –∑–∞—Ä–∞–∂–µ–Ω–∏—è), —á—Ç–æ–±—ã –±—ã–ª–æ –≤–∞—É.
            </div>
          </section>

          <div class="footer">
            <div>¬© –ó–æ–º–±–∏–ì–ª–æ–±–∞–ª ‚Äî Virtual outbreak game. Not a real virus.</div>
            <div>Share format: <span class="mono">?ref=######</span></div>
          </div>
        </main>
      </div>
    </section>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    // ---------- ICONS: inline SVG pack (unique style, one file) ----------
    function icon(name){
      const common = `fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"`;
      switch(name){
        case "bio":
          return `<svg viewBox="0 0 24 24" width="22" height="22" ${common}>
            <path d="M12 3v4"/><path d="M12 17v4"/>
            <path d="M3 12h4"/><path d="M17 12h4"/>
            <path d="M8.5 8.5l2.3 2.3"/><path d="M13.2 13.2l2.3 2.3"/>
            <path d="M15.5 8.5l-2.3 2.3"/><path d="M10.8 13.2l-2.3 2.3"/>
            <circle cx="12" cy="12" r="2.4"/>
            <path d="M12 9.6c3.8 0 6.9 2.1 7.6 5.2"/>
            <path d="M12 9.6c-3.8 0-6.9 2.1-7.6 5.2"/>
            <path d="M12 14.4c3.2 0 5.8-1.5 6.6-3.6"/>
            <path d="M12 14.4c-3.2 0-5.8-1.5-6.6-3.6"/>
          </svg>`;
        case "id":
          return `<svg viewBox="0 0 24 24" width="22" height="22" ${common}>
            <path d="M7 7h10"/><path d="M7 11h6"/><path d="M7 15h10"/>
            <rect x="4" y="5" width="16" height="14" rx="3"/>
            <circle cx="16.5" cy="11" r="1.5"/>
          </svg>`;
        case "crown":
          return `<svg viewBox="0 0 24 24" width="22" height="22" ${common}>
            <path d="M4 8l4 4 4-6 4 6 4-4"/>
            <path d="M5 12l1.5 8h11L19 12"/>
            <path d="M8 20h8"/>
          </svg>`;
        case "chain":
          return `<svg viewBox="0 0 24 24" width="22" height="22" ${common}>
            <path d="M10 13a5 5 0 0 1 0-7l1-1a5 5 0 0 1 7 7l-1 1"/>
            <path d="M14 11a5 5 0 0 1 0 7l-1 1a5 5 0 0 1-7-7l1-1"/>
          </svg>`;
        case "syringe":
          return `<svg viewBox="0 0 24 24" width="18" height="18" ${common}>
            <path d="M14 4l6 6"/><path d="M12 6l6 6"/>
            <path d="M8 10l6 6"/><path d="M3 21l6-6"/>
            <path d="M9 15l-2 2"/><path d="M14 10l-2 2"/>
            <path d="M16 8l2-2"/><path d="M6 18l2-2"/>
            <path d="M9 9l2-2"/>
          </svg>`;
        case "send":
          return `<svg viewBox="0 0 24 24" width="18" height="18" ${common}>
            <path d="M22 2L11 13"/><path d="M22 2l-7 20-4-9-9-4 20-7z"/>
          </svg>`;
        case "skull":
          return `<svg viewBox="0 0 24 24" width="18" height="18" ${common}>
            <path d="M12 2c4.4 0 8 3.3 8 7.4 0 3-1.8 5.6-4.4 6.8V20a2 2 0 0 1-2 2H10.4a2 2 0 0 1-2-2v-3.8C5.8 15 4 12.4 4 9.4 4 5.3 7.6 2 12 2z"/>
            <path d="M9 11h.01"/><path d="M15 11h.01"/>
            <path d="M10 16h4"/>
          </svg>`;
        case "copy":
          return `<svg viewBox="0 0 24 24" width="18" height="18" ${common}>
            <rect x="9" y="9" width="10" height="10" rx="2"/>
            <path d="M7 15H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v1"/>
          </svg>`;
        default:
          return `<svg viewBox="0 0 24 24" width="22" height="22" ${common}><path d="M12 12h.01"/></svg>`;
      }
    }

    // Inject icons in template strings in HTML (quick hack)
    document.body.innerHTML = document.body.innerHTML.replace(/\$\{icon\("([^"]+)"\)\}/g, (_,n)=>icon(n));

    // ---------- DEMO GAME STATE (localStorage) ----------
    const LS_KEY = "zg_demo_state_v0";
    const toastEl = document.getElementById("toast");
    const $ = (id)=>document.getElementById(id);

    function toast(msg){
      toastEl.textContent = msg;
      toastEl.classList.add("show");
      setTimeout(()=>toastEl.classList.remove("show"), 2600);
    }

    function fmt(n){ return "#" + String(n).padStart(6,"0"); }
    function getRef(){
      const u = new URL(location.href);
      const r = u.searchParams.get("ref");
      const num = r ? Number(r) : null;
      return Number.isFinite(num) ? num : null;
    }

    function load(){
      try{
        const raw = localStorage.getItem(LS_KEY);
        if(!raw) return null;
        return JSON.parse(raw);
      }catch{ return null; }
    }
    function save(s){ localStorage.setItem(LS_KEY, JSON.stringify(s)); }

    function defaultState(){
      return {
        nextId: 1,
        me: null,               // {id, infectedBy, infections}
        users: {}               // id -> {id, infectedBy, infections}
      };
    }

    function ensure(){
      const s = load() || defaultState();
      // if URL has ref and user already exists, keep it; ref only matters when claiming
      save(s);
      return s;
    }

    function buildLink(myId){
      const u = new URL(location.href);
      u.searchParams.set("ref", String(myId));
      u.hash = "";
      return u.toString();
    }

    function updateUI(){
      const s = ensure();
      const me = s.me;

      $("meNum").textContent = me ? fmt(me.id) : "‚Äî";
      $("meBy").textContent  = me ? (me.infectedBy ? fmt(me.infectedBy) : "‚Äî") : "‚Äî";
      $("meCount").textContent = me ? String(me.infections || 0) : "‚Äî";
      $("meLink").textContent = me ? buildLink(me.id) : "‚Äî";

      $("sNum").textContent = me ? fmt(me.id) : "‚Äî";
      $("sBy").textContent  = me ? (me.infectedBy ? fmt(me.infectedBy) : "‚Äî") : "‚Äî";
      $("statusHint").textContent = me ? "ACTIVE" : "NO ID";

      $("btnInfect").disabled = !me;
      $("btnCopy").disabled = !me;

      // Leaderboard (local)
      const rows = Object.values(s.users);
      rows.sort((a,b)=>(b.infections||0)-(a.infections||0) || a.id-b.id);

      const tb = $("lbBody");
      tb.innerHTML = "";
      if(rows.length === 0){
        tb.innerHTML = `<tr><td class="rank">‚Äî</td><td class="num">‚Äî</td><td class="rank">‚Äî</td><td class="rank">‚Äî</td></tr>`;
      } else {
        rows.slice(0, 30).forEach((u, i)=>{
          const tr = document.createElement("tr");
          tr.innerHTML = `
            <td class="rank">#${i+1}</td>
            <td class="num">${fmt(u.id)}</td>
            <td class="rank">${u.infections||0}</td>
            <td class="rank">${u.infectedBy ? fmt(u.infectedBy) : "‚Äî"}</td>`;
          tb.appendChild(tr);
        });
      }

      // chain preview
      $("chainText").textContent = me ? "Press BUILD CHAIN" : "‚Äî";
    }

    // ---------- NAV ----------
    document.querySelectorAll(".navBtn").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        document.querySelectorAll(".navBtn").forEach(b=>b.classList.remove("active"));
        btn.classList.add("active");
        const name = btn.dataset.screen;
        document.querySelectorAll(".screen").forEach(s=>s.classList.remove("show"));
        document.getElementById("screen-" + name).classList.add("show");
      });
    });

    // ---------- ACTIONS ----------
    $("btnClaim").addEventListener("click", ()=>{
      const s = ensure();
      if(s.me){
        toast("–£ —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å –Ω–æ–º–µ—Ä.");
        return;
      }
      const ref = getRef(); // who infected you
      const id = s.nextId++;
      const me = { id, infectedBy: ref || null, infections: 0 };
      s.me = me;
      s.users[String(id)] = me;

      // if infectedBy exists, increment that user's infections (only if exists locally)
      if(ref && s.users[String(ref)]){
        s.users[String(ref)].infections = (s.users[String(ref)].infections || 0) + 1;
      }

      save(s);
      updateUI();

      toast("–ù–æ–º–µ—Ä –≤—ã–¥–∞–Ω: " + fmt(id));
    });

    $("btnInfect").addEventListener("click", async ()=>{
      const s = ensure();
      if(!s.me){ toast("–°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∏ –Ω–æ–º–µ—Ä."); return; }
      const link = buildLink(s.me.id);

      try{
        await navigator.clipboard.writeText(link);
        toast("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞. –û—Ç–ø—Ä–∞–≤–ª—è–π –∂–µ—Ä—Ç–≤–µ üòà");
      }catch{
        toast("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å. –°–∫–æ–ø–∏—Ä—É–π –≤—Ä—É—á–Ω—É—é: " + link);
      }
    });

    $("btnCopy").addEventListener("click", async ()=>{
      const s = ensure();
      if(!s.me) return;
      const link = buildLink(s.me.id);
      try{
        await navigator.clipboard.writeText(link);
        toast("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ.");
      }catch{
        toast(link);
      }
    });

    $("btnFakeRank").addEventListener("click", ()=>{
      const s = ensure();
      if(!s.me){ $("rankText").textContent = "–°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∏ –Ω–æ–º–µ—Ä."; return; }

      const rows = Object.values(s.users).sort((a,b)=>(b.infections||0)-(a.infections||0) || a.id-b.id);
      const idx = rows.findIndex(u=>u.id === s.me.id);
      const rank = idx >= 0 ? (idx+1) : "‚Äî";
      $("rankText").textContent = `DEMO RANK: #${rank} (local)`;
      toast("–†–∞–Ω–≥ –ø–æ–∫–∞–∑–∞–Ω (–¥–µ–º–æ).");
    });

    $("btnBuildChain").addEventListener("click", ()=>{
      const s = ensure();
      if(!s.me){ toast("–°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∏ –Ω–æ–º–µ—Ä."); return; }
      const chain = [];
      let cur = s.me;
      let guard = 0;
      while(cur && guard++ < 20){
        chain.push(fmt(cur.id));
        if(!cur.infectedBy) break;
        cur = s.users[String(cur.infectedBy)] || { id: cur.infectedBy, infectedBy: null, infections: 0 };
      }
      $("chainText").textContent = chain.join("  ‚Üí  ");
      toast("–¶–µ–ø–æ—á–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ (–¥–µ–º–æ).");
    });

    $("btnReset").addEventListener("click", ()=>{
      localStorage.removeItem(LS_KEY);
      toast("DEMO RESET. –ú–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ.");
      updateUI();
    });

    // Boot
    updateUI();
  </script>
</body>
</html>
